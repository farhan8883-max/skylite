<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absen Sholat</title>
    <style>
        /* Body dasar */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: url(Premium\ Photo\ _\ Photo\ background\,\ background\ for\ photo\ shoot\,\ blue\ color\ background\,\ portrait\ backdrop.jpeg);
        }

        /* Kontainer utama */
        .container {
            max-width: 900px;
            margin: 40px auto;
            padding: 30px;
            background-color: #7AB2D3;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        /* Judul utama */
        h1 {
            text-align: center;
            color: black;
            font-size: 32px;
            margin-bottom: 20px;
        }

        /* Kolom kontrol input */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }

        /* Elemen input dan button */
        .controls input,
        .controls select,
        .controls button {
            padding: 12px 15px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #ddd;
            width: 100%;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        /* Tombol */
        .controls button {
            background-color: #4A628A;
            color: white;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease;
        }

        .controls button:hover {
            background-color: #4A628A;
        }

        /* Tabel */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            text-align: center;
            border-radius: 12px;
            overflow: hidden;
        }

        /* Tabel header */
        table th {
            background-color: #B9E5E8;
            color: rgb(0, 0, 0);
            padding: 15px;
            font-size: 16px;
        }

        /* Tabel data */
        table td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }

        /* Tabel row hover */
        table tr:hover {
            background-color: #DFF2EB;
        }

        table tr{
            background-color: #B9E5E8;
        }

        /* Tombol Edit */
        button.edit-btn {
            background-color: #ffb300; /* Biru */
            color: white;
            padding: 8px 15px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button.edit-btn:hover {
            background-color: #d0991a; /* Biru lebih gelap */
        }

        /* Tombol Delete */
        button.delete-btn {
            background-color: #FF5733; /* Merah */
            color: white;
            padding: 8px 15px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button.delete-btn:hover {
            background-color: #c13a24; /* Merah lebih gelap */
        }

        /* Media Query untuk perangkat kecil */
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                gap: 20px;
            }

            .controls input, .controls select, .controls button {
                width: 100%;
            }

            table th, table td {
                font-size: 14px;
                padding: 10px;
            }
        }

        /* Media Query untuk perangkat sangat kecil */
        @media (max-width: 480px) {
            h1 {
                font-size: 24px;
            }

            table th, table td {
                font-size: 12px;
                padding: 8px;
            }
        }

        .search-bar {
            margin-bottom: 20px;
        }

        .search-bar input {
            padding: 10px;
            width: 100%;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #000000;
        }

        #animatedText {
            font-size: 1rem;
            border-right: 2px  #000000;
            white-space: nowrap;
            overflow: hidden;
            padding: 1em;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }

        @keyframes blink {
            50% {
                border-color: transparent;
            }
        }

        #animatedText {
            animation: blink 0.10s step-end infinite;
        }

        .type {
            display: flex;
            justify-content: center;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Absen Sholatüïå</h1>
        <div class="search-bar">
            <input type="text" id="search" placeholder="Cari nama..." oninput="filterTable()">
        </div>
        <table id="prayer-table">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Hari</th>
                    <th>Waktu Sholat</th>
                    <th>Nama</th>
                    <th>Status</th>
                    <th>Tanggal & Waktu</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody id="prayer-list"></tbody>
        </table>
        <div class="controls">
            <input type="text" id="name" placeholder="Masukkan nama">
            <select id="prayer-time">
                <option value="Subuh">Subuh</option>
                <option value="Dzuhur">Dzuhur</option>
                <option value="Ashar">Ashar</option>
                <option value="Maghrib">Maghrib</option>
                <option value="Isya">Isya</option>
                <option value="Tahajud">Tahajud</option>
                <option value="Dhuha">Dhuha</option>
            </select>
            <select id="status">
                <option value="Sholat">Sholat</option>
                <option value="Tidak Sholat">Tidak Sholat</option>
            </select>
            <button onclick="addPrayer()">Absen</button>
        </div>
        <h2>Rekapitulasi :</h2>
        <div>
            <p style="color: rgb(0, 8, 255);"><strong>Jumlah yang sholat‚úÖ:</strong> <span id="sholat-count">0</span></p>
            <p style="color: rgb(255, 0, 0);"><strong>Jumlah yang tidak sholat‚ùå:</strong> <span id="not-sholat-count">0</span></p>
        </div>
        <div class="type">
            <h1>|</h1><div id="animatedText"></div><h1>|</h1>
        </div>
    </div>
    <script>
        let prayers = JSON.parse(localStorage.getItem("prayers")) || [];
        let prayerId = prayers.length > 0 ? Math.max(...prayers.map(p => p.id)) + 1 : 1;

        function addPrayer() {
            const name = document.getElementById("name").value.trim();
            const prayerTime = document.getElementById("prayer-time").value;
            const status = document.getElementById("status").value;

            if (!name) {
                alert("Nama tidak boleh kosong!");
                return;
            }

            const days = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
            const day = days[new Date().getDay()];
            const date = new Date().toLocaleDateString(); // Menambahkan tanggal
            const time = new Date().toLocaleTimeString(); // Menambahkan waktu

            const prayer = {
                id: prayerId++,
                name,
                prayerTime,
                day,
                status,
                date,
                time
            };

            prayers.push(prayer);
            saveToLocalStorage();
            renderTable();
            updateCounts();
        }

        function deletePrayer(id) {
            prayers = prayers.filter(prayer => prayer.id !== id);
            saveToLocalStorage();
            renderTable();
            updateCounts();
        }

        function editPrayer(id) {
            const name = prompt("Masukkan nama baru:");
            if (name) {
                const prayer = prayers.find(prayer => prayer.id === id);
                if (prayer) {
                    prayer.name = name;
                }
                saveToLocalStorage();
                renderTable();
            }
        }

        function renderTable() {
            const tableBody = document.getElementById("prayer-list");
            tableBody.innerHTML = "";

            prayers.forEach((prayer, index) => {
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${prayer.day}</td>
                        <td>${prayer.prayerTime}</td>
                        <td>${prayer.name}</td>
                        <td>${prayer.status}</td>
                        <td>${prayer.date} ${prayer.time}</td>
                        <td>
                            <button class="edit-btn" onclick="editPrayer(${prayer.id})">Edit</button>
                            <button class="delete-btn" onclick="deletePrayer(${prayer.id})">Hapus</button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        function updateCounts() {
            const sholatCount = prayers.filter(prayer => prayer.status === "Sholat").length;
            const notSholatCount = prayers.filter(prayer => prayer.status === "Tidak Sholat").length;
            document.getElementById("sholat-count").textContent = sholatCount;
            document.getElementById("not-sholat-count").textContent = notSholatCount;
        }

        function saveToLocalStorage() {
            localStorage.setItem("prayers", JSON.stringify(prayers));
        }

        function filterTable() {
            const query = document.getElementById("search").value.toLowerCase();
            const filteredPrayers = prayers.filter(prayer => prayer.name.toLowerCase().includes(query));
            renderFilteredTable(filteredPrayers);
        }

        function renderFilteredTable(filteredPrayers) {
            const tableBody = document.getElementById("prayer-list");
            tableBody.innerHTML = "";

            filteredPrayers.forEach((prayer, index) => {
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${prayer.day}</td>
                        <td>${prayer.prayerTime}</td>
                        <td>${prayer.name}</td>
                        <td>${prayer.status}</td>
                        <td>${prayer.date} ${prayer.time}</td>
                        <td>
                            <button class="edit-btn" onclick="editPrayer(${prayer.id})">Edit</button>
                            <button class="delete-btn" onclick="deletePrayer(${prayer.id})">Hapus</button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        const texts = ["Hay,para santri", "Udah pada sholat?", "Kita absen ya.."];
        const animatedText = document.getElementById("animatedText");
        let textIndex = 0;
        let charIndex = 0;

        function typeText() {
            if (charIndex < texts[textIndex].length) {
                animatedText.textContent += texts[textIndex].charAt(charIndex);
                charIndex++;
                setTimeout(typeText, 100); // Ketik huruf berikutnya
            } else {
                setTimeout(deleteText, 1000); // Tunggu sebelum menghapus
            }
        }

        function deleteText() {
            if (charIndex > 0) {
                animatedText.textContent = texts[textIndex].substring(0, charIndex - 1);
                charIndex--;
                setTimeout(deleteText, 50); // Hapus huruf berikutnya
            } else {
                textIndex = (textIndex + 1) % texts.length; // Pindah ke teks berikutnya
                setTimeout(typeText, 500); // Tunggu sebelum mengetik ulang
            }
        }

        typeText(); // Mulai animasi

        renderTable();
        updateCounts();
    </script>
</body>
</html>
